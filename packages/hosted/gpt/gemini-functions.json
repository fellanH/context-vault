{
  "function_declarations": [
    {
      "name": "search_vault",
      "description": "Search the knowledge vault using hybrid full-text + semantic search. Use this as the PRIMARY way to find information.",
      "parameters": {
        "type": "object",
        "properties": {
          "query": { "type": "string", "description": "Natural language search query" },
          "kind": { "type": "string", "description": "Filter by entry kind (e.g. insight, decision, pattern)" },
          "category": { "type": "string", "enum": ["knowledge", "entity", "event"], "description": "Filter by category" },
          "limit": { "type": "integer", "description": "Max results (default 20)" }
        },
        "required": ["query"]
      }
    },
    {
      "name": "create_entry",
      "description": "Save new knowledge to the vault. KNOWLEDGE kinds are enduring, ENTITY kinds require identity_key, EVENT kinds decay over time.",
      "parameters": {
        "type": "object",
        "properties": {
          "kind": { "type": "string", "description": "Entry kind (insight, decision, pattern, contact, project, etc.)" },
          "body": { "type": "string", "description": "Main content" },
          "title": { "type": "string", "description": "Optional title" },
          "tags": { "type": "array", "items": { "type": "string" }, "description": "Tags for categorization" },
          "identity_key": { "type": "string", "description": "Required for entity kinds — unique identifier" }
        },
        "required": ["kind", "body"]
      }
    },
    {
      "name": "list_entries",
      "description": "Browse vault entries without a search query. Use search_vault instead when you have a specific topic.",
      "parameters": {
        "type": "object",
        "properties": {
          "kind": { "type": "string", "description": "Filter by kind" },
          "category": { "type": "string", "enum": ["knowledge", "entity", "event"] },
          "limit": { "type": "integer", "description": "Max entries (default 20)" },
          "offset": { "type": "integer", "description": "Pagination offset" }
        }
      }
    },
    {
      "name": "get_entry",
      "description": "Get a single vault entry by its ID.",
      "parameters": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "description": "Entry ULID" }
        },
        "required": ["id"]
      }
    },
    {
      "name": "update_entry",
      "description": "Update an existing vault entry. Only include fields to change — omitted fields are preserved.",
      "parameters": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "description": "Entry ULID to update" },
          "title": { "type": "string" },
          "body": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } },
          "meta": { "type": "object" }
        },
        "required": ["id"]
      }
    },
    {
      "name": "delete_entry",
      "description": "Permanently delete a vault entry by ID.",
      "parameters": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "description": "Entry ULID to delete" }
        },
        "required": ["id"]
      }
    },
    {
      "name": "vault_status",
      "description": "Get vault health: entry counts, database size, embedding coverage, and any issues.",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    }
  ]
}
